 [
    {
        "id": "mqtt-broker",
        "type": "mqtt-broker",
        "name": "IoT Broker",
        "broker": "iot.eclipse.org",
        "port": "1883",
        "clientid": "",
        "autoConnect": true
    },
    {
        "id": "temp-in",
        "type": "mqtt in",
        "name": "Temperature",
        "topic": "home/sensors/temperature",
        "qos": "1",
        "broker": "mqtt-broker",
        "x": 150,
        "y": 100
    },
    {
        "id": "humid-in",
        "type": "mqtt in",
        "name": "Humidity",
        "topic": "home/sensors/humidity",
        "qos": "1",
        "broker": "mqtt-broker",
        "x": 150,
        "y": 200
    },
    {
        "id": "setpoint-out",
        "type": "mqtt out",
        "name": "Setpoint",
        "topic": "home/control/setpoint",
        "qos": "1",
        "retain": "false",
        "broker": "mqtt-broker",
        "x": 750,
        "y": 300
    },
    {
        "id": "temp-gauge",
        "type": "ui_gauge",
        "name": "Temperature",
        "group": "dashboard",
        "order": 1,
        "width": 6,
        "height": 4,
        "gtype": "gage",
        "title": "Temperature",
        "label": "째C",
        "format": "{{value}}",
        "min": 0,
        "max": 40,
        "colors": ["#00b500", "#e6e600", "#ca3838"],
        "seg1": "15",
        "seg2": "30",
        "x": 450,
        "y": 100
    },
    {
        "id": "humid-gauge",
        "type": "ui_gauge",
        "name": "Humidity",
        "group": "dashboard",
        "order": 2,
        "width": 6,
        "height": 4,
        "gtype": "gage",
        "title": "Humidity",
        "label": "%",
        "format": "{{value}}",
        "min": 0,
        "max": 100,
        "colors": ["#ca3838", "#e6e600", "#00b500"],
        "seg1": "30",
        "seg2": "70",
        "x": 450,
        "y": 200
    },
    {
        "id": "setpoint-control",
        "type": "ui_slider",
        "name": "Setpoint",
        "label": "Target Temperature",
        "group": "dashboard",
        "order": 3,
        "width": 8,
        "height": 2,
        "passthru": true,
        "topic": "setpoint",
        "min": "10",
        "max": "30",
        "step": "0.5",
        "x": 450,
        "y": 300
    },
    {
        "id": "setpoint-display",
        "type": "ui_text",
        "name": "Setpoint",
        "group": "dashboard",
        "order": 4,
        "width": 4,
        "height": 2,
        "label": "Setpoint",
        "format": "<b>{{msg.payload}}째C</b>",
        "layout": "row-spread",
        "x": 450,
        "y": 350
    },
    {
        "id": "function-node",
        "type": "function",
        "name": "Process Setpoint",
        "func": "msg.topic = \"home/control/setpoint\";\nreturn msg;",
        "outputs": 1,
        "x": 600,
        "y": 300
    },
    {
        "id": "setpoint-in",
        "type": "mqtt in",
        "name": "Setpoint",
        "topic": "home/control/setpoint",
        "qos": "1",
        "broker": "mqtt-broker",
        "x": 150,
        "y": 300
    },
    {
        "id": "alert-node",
        "type": "function",
        "name": "Check Alerts",
        "func": "if (msg.topic === \"home/sensors/temperature\") {\n    const temp = parseFloat(msg.payload);\n    if (temp < 10) {\n        return { payload: \"Low temp: \" + temp + \"째C\" };\n    } else if (temp > 35) {\n        return { payload: \"High temp: \" + temp + \"째C\" };\n    }\n} else if (msg.topic === \"home/sensors/humidity\") {\n    const humid = parseFloat(msg.payload);\n    if (humid > 80) {\n        return { payload: \"High humidity: \" + humid + \"%\" };\n    }\n}\nreturn null;",
        "outputs": 1,
        "x": 450,
        "y": 400
    },
    {
        "id": "alert-display",
        "type": "ui_text",
        "name": "Alerts",
        "group": "dashboard",
        "order": 5,
        "width": 12,
        "height": 2,
        "label": "System Alerts",
        "format": "<span style=\"color:red\">{{msg.payload}}</span>",
        "layout": "row-spread",
        "x": 750,
        "y": 400
    }
]
